<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="UTF-8">
    <title>Hangman</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  </head>
  <body>
    <h1 id='wordSpot'></h1>
    <div>
      <span>Pokemon caught</span><span id="totalCaught">0</span>
    </div>
    <script type="text/javascript">
      $(document).ready(function() {

      var words =['pokemon','pikachu','charizard','bulbasaur', 'jigglypuff','squirtle','pidgey','snorlax','butterfree', 'beedrill', 'rattata', 'ekans', 'nidoking','clefary','vulpix','gloom','diglett','meowth','psyduck','abra'];

      var pokemon = {
        p1 :{
          name: 'Bulbasaur',
          type: 'Grass',
          number: 1,
          caught:false,
        },
        p4: {
          name: 'Charmander',
          type: 'Fire',
          number: 1,
          caught:false,
        }
      }

      console.log(pokemon.p1.name);

      var curWord = [];
      var curGuess = [];
      var caughtCount = 0;
      var lastWord = -1;
      // Array(words.length).join("_");
        newGame();

  document.onkeyup = function(event) {

        // Captures the key press, converts it to lowercase, and saves it to a variable.
        var letter = String.fromCharCode(event.keyCode).toLowerCase();
        //index to determine if there are matches can probably replace this
        var guess = curWord.indexOf(letter);
        console.log(curWord);
        console.log(letter);
        console.log(guess);

        if (guess != -1) {
          var allIndex = getAllIndexes(curWord,letter);
            for (var i = 0; i < allIndex.length; i++) {
              curGuess[allIndex[i]] = letter;
            }
          // curGuess[guess] = letter;
          // curWord.push(words[i]);
          $('#wordSpot').html(curGuess)
          checkWin();
        }
        
      };


    function checkWin() {
      var emptyLetter = curGuess.indexOf("_");
      if (emptyLetter == -1) {
        // alert('Winner Winner Chicken Dinner');
        caughtCount++;
        $("#totalCaught").html(caughtCount);
        newGame();
      }
    }

      function newGame() {

        // var randomWord = Math.floor(Math.random()*20)+1;

        var randomPokemon = 1;
        

        if (lastWord != randomWord) {

            curWord =[];
            curGuess =[];

            for (var i =0; i< words[randomWord].length; i++) {
                  curGuess.push("_")
                  curWord.push(words[randomWord][i]);
                }
                

                $('#wordSpot').html(curGuess)
                lastWord = randomWord;
              }
          else {
           newGame();
         }
        }

    function getAllIndexes(arr, val) {
          var indexes = [], i;
          for(i = 0; i < arr.length; i++)
              if (arr[i] === val)
                  indexes.push(i);
          return indexes;
      }
    });
    </script>  
  </body>
</html>
